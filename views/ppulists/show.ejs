<% layout("ppulayouts/ppuboilerplate") %>
<div class="row mt-3">
<div class="col-8 offset-2">

<h3>Ppu Post</h3>
</div>
    <div class="card col-6 offset-2 show-card">
      <% if (ppulist.image) { %>
    <div class="image-container position-relative">
        <img 
            src="<%= typeof ppulist.image === 'string' ? ppulist.image : ppulist.image.url %>" 
            class="card-img-top show-img img-fluid" 
            alt="Post image"
            loading="lazy"
            onerror="this.onerror=null;this.src='/images/default-placeholder.png';this.classList.add('placeholder-image')"
        />
        <% if (ppulist.image.caption) { %>
            <div class="image-caption text-muted small mt-1">
                <%= ppulist.image.caption %>
            </div>
        <% } %>
    </div>
<% } else { %>
    <div class="card-img-top show-img bg-light d-flex align-items-center justify-content-center" style="height: 200px;">
        <i class="bi bi-image fs-1 text-muted"></i>
    </div>
<% } %>

        <div class="card-body"> 
            <p class="card-text">
                <b><%= ppulist.title %></b> <br>
                <%= ppulist.description %> <br>
                <strong>Posted By:</strong> <%= ppulist.postedBy %> <br>
                <strong>Time:</strong> <%= ppulist.time ? new Date(ppulist.time).toLocaleString("en-IN", { 
                    day: '2-digit',
                    month: 'short',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: true
                }) : "No Time Available" %> <br>
            </p>
        </div>
    </div>

   <br />

<div class="btns">
    <a 
    href="/ppulists/<%= ppulist._id %>/editpost" 
        class="btn btn-warning offset-2">
        Edit Post</a
        >
        
<form method="POST" action="/ppulists/<%= ppulist._id %>?_method=DELETE">
    <button class="btn btn-warning offset-4">Delete</button>
</form>
</div>
</div>
